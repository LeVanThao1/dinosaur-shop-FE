{"version":3,"sources":["pages/Login/index.js"],"names":["initialState","email","password","error","success","Login","props","history","useHistory","from","useLocation","state","pathname","useSelector","auth","isLogged","push","useState","user","setUser","err","dispatch","useDispatch","handleSubmit","e","a","preventDefault","userApi","login","res","notifiSuccess","localStorage","setItem","action","setLogin","response","data","msg","notifiError","handleChangeInput","target","name","value","responseGoogle","loginGG","tokenId","responseFacebook","accessToken","userID","loginFB","className","showErrMsg","onSubmit","htmlFor","type","placeholder","id","onChange","to","clientId","buttonText","onSuccess","cookiePolicy","appId","autoLoad","fields","callback"],"mappings":"8QAoBMA,EAAe,CACpBC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,QAAS,IA0IKC,UAvIf,SAAeC,GACd,IAAMC,EAAUC,cAERC,GADSC,cACSC,OAAS,CAAEF,KAAM,CAAEG,SAAU,OAA/CH,KACKI,aAAY,SAACF,GAAD,OAAWA,EAAMG,QAEjCC,WACc,MAAlBN,EAAKG,SAAkBL,EAAQS,KAAKP,GAEvCF,EAAQS,KAAK,MATM,MAaGC,mBAASjB,GAbZ,mBAadkB,EAbc,KAaRC,EAbQ,KAeblB,EAAkCiB,EAAlCjB,MAAOC,EAA2BgB,EAA3BhB,SAAUkB,EAAiBF,EAAjBE,IAEnBC,GAFoCH,EAAZd,QAEbkB,eACXC,EAAY,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,sEAEnBD,EAAEE,iBAFiB,SAGDC,IAAQC,MAAM3B,EAAOC,GAHpB,OAGb2B,EAHa,OAKnBC,YAAc,SAAUD,GACxBE,aAAaC,QAAQ,cAAc,GAC7BC,EAASC,cACfb,EAASY,GACT1B,EAAQS,KAAKP,GATM,kDAWnB,KAAI0B,SAASC,KAAKC,KACjBC,YAAY,QAAS,KAAIH,SAASC,KAAKC,KAZrB,0DAAH,sDAgBZE,EAAoB,SAACf,GAAO,IAAD,IACRA,EAAEgB,OAAlBC,EADwB,EACxBA,KAAMC,EADkB,EAClBA,MACdvB,EAAQ,2BAAKD,GAAN,uBAAauB,EAAOC,GAApB,oBAAgC,IAAhC,wBAA6C,IAA7C,MAGFC,EAAc,uCAAG,WAAOR,GAAP,eAAAV,EAAA,+EAKHE,IAAQiB,QAAQT,EAASU,SALtB,OAKfhB,EALe,OAMrBV,EAAQ,2BAAKD,GAAN,IAAYf,MAAO,GAAIC,QAASyB,EAAIO,KAAKC,OAChDN,aAAaC,QAAQ,cAAc,GACnCX,EAASa,eACTJ,YAAc,SAAUD,EAAIO,KAAKC,KACjC9B,EAAQS,KAAKP,GAVQ,kDAYrB,KAAI0B,SAASC,KAAKC,KACjBC,YAAY,QAAS,KAAIH,SAASC,KAAKC,KAbnB,0DAAH,sDAiBdS,EAAgB,uCAAG,WAAOX,GAAP,mBAAAV,EAAA,kEAEfsB,EAAwBZ,EAAxBY,YAAaC,EAAWb,EAAXa,OAChBD,GAAgBC,EAHE,gBAItB7B,EAAQ,2BAAKD,GAAN,IAAYf,MAAO,8BAJJ,uCAMJwB,IAAQsB,QAAQF,EAAaC,GANzB,OAMhBnB,EANgB,OAOtBV,EAAQ,2BAAKD,GAAN,IAAYf,MAAO,GAAIC,QAASyB,EAAIO,KAAKC,OAChDN,aAAaC,QAAQ,cAAc,GACnCF,YAAc,SAAUD,EAAIO,KAAKC,KACjChB,EAASa,eACT3B,EAAQS,KAAKP,GAXS,0DAcvB,KAAI0B,SAASC,KAAKC,KACjBC,YAAY,QAAS,KAAIH,SAASC,KAAKC,KAfjB,0DAAH,sDAmBtB,OACC,sBAAKa,UAAU,aAAf,UACC,uCACC9B,GAAO+B,YAAW/B,GACnB,uBAAMgC,SAAU7B,EAAhB,UACC,gCACC,uBAAO8B,QAAQ,QAAf,2BACA,uBACCC,KAAK,OACLC,YAAY,sBACZC,GAAG,QACHd,MAAOzC,EACPwC,KAAK,QACLgB,SAAUlB,OAIZ,gCACC,uBAAOc,QAAQ,WAAf,sBACA,uBACCC,KAAK,WACLC,YAAY,iBACZC,GAAG,WACHd,MAAOxC,EACPuC,KAAK,WACLgB,SAAUlB,OAIZ,sBAAKW,UAAU,MAAf,UACC,wBAAQI,KAAK,SAAb,mBACA,cAAC,IAAD,CAAMI,GAAG,mBAAT,yCAIF,qBAAKR,UAAU,KAAf,2BAEA,sBAAKA,UAAU,SAAf,UACC,cAAC,cAAD,CACCS,SAAS,2EACTC,WAAW,oBACXC,UAAWlB,EACXmB,aAAc,uBAGf,cAAC,IAAD,CACCC,MAAM,kBACNC,UAAU,EACVC,OAAO,qBACPC,SAAUpB,OAIZ,+CACe,cAAC,IAAD,CAAMY,GAAG,YAAT,8B","file":"static/js/27.f9214253.chunk.js","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport FacebookLogin from \"react-facebook-login\";\nimport { GoogleLogin } from \"react-google-login\";\n// import { useDispatch } from \"react-redux\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n// import { dispatchLogin } from \"../../redux/action/authAction\";\nimport {\n\tnotifiError,\n\tnotifiSuccess,\n\tshowErrMsg,\n\tshowSuccessMsg,\n} from \"../../utils/notification\";\nimport \"./style.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setLogin } from \"../../slice/auth.slice\";\nimport userApi from \"../../api/userApi\";\n\nLogin.propTypes = {};\n\nconst initialState = {\n\temail: \"\",\n\tpassword: \"\",\n\terror: \"\",\n\tsuccess: \"\",\n};\n\nfunction Login(props) {\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst { from } = location.state || { from: { pathname: \"/\" } };\n\tconst auth = useSelector((state) => state.auth);\n\n\tif (auth.isLogged) {\n\t\tif (from.pathname !== \"/\") history.push(from);\n\t\telse {\n\t\t\thistory.push(\"/\");\n\t\t}\n\t}\n\n\tconst [user, setUser] = useState(initialState);\n\n\tconst { email, password, err, success } = user;\n\n\tconst dispatch = useDispatch();\n\tconst handleSubmit = async (e) => {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tconst res = await userApi.login(email, password);\n\n\t\t\tnotifiSuccess(\"Notify\", res);\n\t\t\tlocalStorage.setItem(\"firstLogin\", true);\n\t\t\tconst action = setLogin();\n\t\t\tdispatch(action);\n\t\t\thistory.push(from);\n\t\t} catch (err) {\n\t\t\terr.response.data.msg &&\n\t\t\t\tnotifiError(\"Error\", err.response.data.msg);\n\t\t}\n\t};\n\n\tconst handleChangeInput = (e) => {\n\t\tconst { name, value } = e.target;\n\t\tsetUser({ ...user, [name]: value, err: \"\", success: \"\" });\n\t};\n\n\tconst responseGoogle = async (response) => {\n\t\ttry {\n\t\t\t//   const res = await axios.post(\"/user/google_login\", {\n\t\t\t//     tokenId: response.tokenId,\n\t\t\t//   });\n\t\t\tconst res = await userApi.loginGG(response.tokenId);\n\t\t\tsetUser({ ...user, error: \"\", success: res.data.msg });\n\t\t\tlocalStorage.setItem(\"firstLogin\", true);\n\t\t\tdispatch(setLogin());\n\t\t\tnotifiSuccess(\"Notify\", res.data.msg);\n\t\t\thistory.push(from);\n\t\t} catch (err) {\n\t\t\terr.response.data.msg &&\n\t\t\t\tnotifiError(\"Error\", err.response.data.msg);\n\t\t}\n\t};\n\n\tconst responseFacebook = async (response) => {\n\t\ttry {\n\t\t\tconst { accessToken, userID } = response;\n\t\t\tif (!accessToken || !userID) {\n\t\t\t\tsetUser({ ...user, error: \"Login fail with facebook\" });\n\t\t\t} else {\n\t\t\t\tconst res = await userApi.loginFB(accessToken, userID);\n\t\t\t\tsetUser({ ...user, error: \"\", success: res.data.msg });\n\t\t\t\tlocalStorage.setItem(\"firstLogin\", true);\n\t\t\t\tnotifiSuccess(\"Notify\", res.data.msg);\n\t\t\t\tdispatch(setLogin());\n\t\t\t\thistory.push(from);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terr.response.data.msg &&\n\t\t\t\tnotifiError(\"Error\", err.response.data.msg);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"login_page\">\n\t\t\t<h2>Login</h2>\n\t\t\t{err && showErrMsg(err)}\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"email\">Email Address</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Enter email address\"\n\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tonChange={handleChangeInput}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Enter password\"\n\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tonChange={handleChangeInput}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<button type=\"submit\">Login</button>\n\t\t\t\t\t<Link to=\"/forgot_password\">Forgot your password?</Link>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<div className=\"hr\">Or Login With</div>\n\n\t\t\t<div className=\"social\">\n\t\t\t\t<GoogleLogin\n\t\t\t\t\tclientId=\"495868402334-hv0mqs9mh0u9ip19krurch7thn6a5n15.apps.googleusercontent.com\"\n\t\t\t\t\tbuttonText=\"Login with google\"\n\t\t\t\t\tonSuccess={responseGoogle}\n\t\t\t\t\tcookiePolicy={\"single_host_origin\"}\n\t\t\t\t/>\n\n\t\t\t\t<FacebookLogin\n\t\t\t\t\tappId=\"197972598576220\"\n\t\t\t\t\tautoLoad={false}\n\t\t\t\t\tfields=\"name,email,picture\"\n\t\t\t\t\tcallback={responseFacebook}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<p>\n\t\t\t\tNew Customer? <Link to=\"/register\">Register</Link>\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n\nexport default Login;\n"],"sourceRoot":""}