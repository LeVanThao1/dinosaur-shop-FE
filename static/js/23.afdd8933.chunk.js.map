{"version":3,"sources":["pages/Payment/OrderContent/index.js","utils/format/index.js"],"names":["OrderContent","total","t","useTranslation","history","useHistory","useState","text","setText","promotion","setPromotion","error","setError","dispatch","useDispatch","cart","useSelector","state","className","type","value","onChange","e","target","onClick","API","then","res","data","catch","response","msg","showErrMsg","formatMoney","percent","products","map","cc","tamp","price","productId","salePrice","setOrdering","push","money","toString","replace"],"mappings":"sOAoGeA,UAtFf,YAAkC,IAAVC,EAAS,EAATA,MACfC,EAAMC,cAAND,EACFE,EAAUC,cAFgB,EAGRC,mBAAS,IAHD,mBAGzBC,EAHyB,KAGnBC,EAHmB,OAIEF,mBAAS,MAJX,mBAIzBG,EAJyB,KAIdC,EAJc,OAKNJ,mBAAS,MALH,mBAKzBK,EALyB,KAKlBC,EALkB,KAM1BC,EAAWC,cACXC,EAAOC,aAAY,SAACC,GAAD,OAAWA,EAAMF,QAyB1C,OACC,sBAAKG,UAAU,6BAAf,UACC,qBAAKA,UAAU,SAAf,SAAyBhB,EAAE,iBAC3B,sBAAKgB,UAAU,gBAAf,UACC,sBAAKA,UAAU,YAAf,UACC,qBAAKA,UAAU,eAAf,SAA+BhB,EAAE,qBACjC,sBAAKgB,UAAU,qBAAf,UACC,cAAC,IAAD,CAAOC,KAAK,OAAOC,MAAOb,EAAMc,SApBnB,SAACC,GAClBd,EAAQc,EAAEC,OAAOH,UAoBb,cAAC,IAAD,CAAQF,UAAU,YAAYM,QAjBlB,WAChBC,YAAI,wBAA0BlB,EAAM,OAClCmB,MAAK,SAACC,GACNf,EAAS,MACTF,EAAaiB,EAAIC,SAEjBC,OAAM,SAACP,GAAD,OAAOV,EAASU,EAAEQ,SAASF,KAAKG,SAWpC,SACE7B,EAAE,oBAGJS,GAASqB,YAAWrB,MAEtB,sBAAKO,UAAU,cAAf,UACC,sBAAKA,UAAU,OAAf,UACC,+BAAOhB,EAAE,iBACT,iCAAO+B,YAAYhC,GAAnB,aAED,sBAAKiB,UAAU,YAAf,UACC,8BACEhB,EAAE,mBAAoB,IACtBO,EAAYA,EAAUyB,QAAU,EAFlC,OAIA,8BACED,YACChC,GAASQ,EAAS,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAWyB,QAAU,GAC1C,KAHH,eASF,sBAAKhB,UAAU,YAAf,UACC,sBAAKA,UAAU,mBAAf,UACC,+BAAOhB,EAAE,uBACT,iCACE+B,YACAxB,EACGR,GAAS,EAAIQ,EAAUyB,QAAU,KACjCjC,GAJL,YASD,cAAC,IAAD,CAAQkB,KAAK,UAAUK,QApEL,WACrB,IAAMW,EAAWpB,EAAKqB,KAAI,SAACC,GAC1B,IAAMC,EAAI,eAAQD,GAElB,OADAC,EAAKC,MAAQF,EAAGG,UAAUC,UACnBH,KAERzB,EAAS6B,YAAY,CAAEjC,UAAWA,EAAW0B,cAC7C/B,EAAQuC,KAAK,cA6DV,SACEzC,EAAE,sC,uDC5FT,kCAAO,IAAM+B,EAAc,SAACW,GAC3B,OAAOA,EAAMC,WAAWC,QAAQ,wBAAyB","file":"static/js/23.afdd8933.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./index.scss\";\r\nimport { Button } from \"antd\";\r\nimport { Input } from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport API from \"../../../axios\";\r\nimport { showErrMsg } from \"../../../utils/notification\";\r\nimport { setOrdering } from \"../../../slice/order.slice\";\r\nimport { formatMoney } from \"../../../utils/format\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nfunction OrderContent({ total }) {\r\n\tconst { t } = useTranslation();\r\n\tconst history = useHistory();\r\n\tconst [text, setText] = useState(\"\");\r\n\tconst [promotion, setPromotion] = useState(null);\r\n\tconst [error, setError] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\tconst cart = useSelector((state) => state.cart);\r\n\r\n\tconst handlePayment = () => {\r\n\t\tconst products = cart.map((cc) => {\r\n\t\t\tconst tamp = { ...cc };\r\n\t\t\ttamp.price = cc.productId.salePrice;\r\n\t\t\treturn tamp;\r\n\t\t});\r\n\t\tdispatch(setOrdering({ promotion: promotion, products }));\r\n\t\thistory.push(\"/shipping\");\r\n\t};\r\n\r\n\tconst _onChange = (e) => {\r\n\t\tsetText(e.target.value);\r\n\t};\r\n\r\n\tconst _onClick = () => {\r\n\t\tAPI(\"api/check/promotions/\" + text, \"GET\")\r\n\t\t\t.then((res) => {\r\n\t\t\t\tsetError(null);\r\n\t\t\t\tsetPromotion(res.data);\r\n\t\t\t})\r\n\t\t\t.catch((e) => setError(e.response.data.msg));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"info__pay .col-6 .col-sm-4\">\r\n\t\t\t<div className=\"header\">{t(\"carts.order\")}</div>\r\n\t\t\t<div className=\"info__content\">\r\n\t\t\t\t<div className=\"promotion\">\r\n\t\t\t\t\t<div className=\"id_Promotion\">{t(\"carts.enterCode\")}</div>\r\n\t\t\t\t\t<div className=\"promotion__content\">\r\n\t\t\t\t\t\t<Input type=\"text\" value={text} onChange={_onChange} />\r\n\t\t\t\t\t\t<Button className=\"btn btnOK\" onClick={_onClick}>\r\n\t\t\t\t\t\t\t{t(\"carts.apply\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{error && showErrMsg(error)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"orderDetail\">\r\n\t\t\t\t\t<div className=\"cost\">\r\n\t\t\t\t\t\t<span>{t(\"carts.order\")}</span>\r\n\t\t\t\t\t\t<span>{formatMoney(total)} VND</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"reduction\">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{t(\"carts.reduction\")}{\" \"}\r\n\t\t\t\t\t\t\t{promotion ? promotion.percent : 0}%\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{formatMoney(\r\n\t\t\t\t\t\t\t\t(total * (promotion ? promotion?.percent : 0)) /\r\n\t\t\t\t\t\t\t\t\t100\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tVND\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"tempCacul\">\r\n\t\t\t\t\t<div className=\"child__tempCacul\">\r\n\t\t\t\t\t\t<span>{t(\"carts.provisional\")}</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{formatMoney(\r\n\t\t\t\t\t\t\t\tpromotion\r\n\t\t\t\t\t\t\t\t\t? total * (1 - promotion.percent / 100)\r\n\t\t\t\t\t\t\t\t\t: total\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\tVND\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={handlePayment}>\r\n\t\t\t\t\t\t{t(\"carts.continuePayment\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OrderContent;\r\n","export const formatMoney = (money) => {\n\treturn money.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n};\n"],"sourceRoot":""}