(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[31,43],{151:function(e,a,t){"use strict";t.r(a);var n=t(6),c=t(29),s=t.n(c),r=t(58),i=t(61),l=t(1),o=t(0),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},u=t(16),h=function(e,a){return o.createElement(u.a,Object.assign({},e,{ref:a,icon:d}))};h.displayName="CameraOutlined";var m=o.forwardRef(h),b=t(489),j=t(623),p=t(410),f=t(190),O=t(22),g=t.n(O),x=t(10),v=t(470),w=t.n(v),N=t(120),y=t(73),V=t(169),k=t(119),P=(t(394),b.a.Option);function F(){var e=Object(x.c)((function(e){return e.auth})).user,a=j.a.useForm(),t=Object(i.a)(a,1)[0],c=j.a.useForm(),d=Object(i.a)(c,1)[0],u=Object(o.useState)(e.avatar),h=Object(i.a)(u,2),O=h[0],v=h[1],F=Object(x.c)((function(e){return e.token})),C=Object(x.b)(),_=Object(o.useState)(""),H=Object(i.a)(_,2),T=H[0],I=H[1],S=Object(o.useState)(""),q=Object(i.a)(S,2),z=q[0],M=q[1],D=Object(o.useState)(""),$=Object(i.a)(D,2),B=($[0],$[1]),E=(Object(o.useRef)(null),Object(o.useState)(!1)),A=Object(i.a)(E,2),G=A[0],X=A[1],J=Object(x.c)((function(e){return e.loading}));Object(o.useEffect)((function(){var a,n,c;C(Object(V.b)(!0)),e.provincial&&e.district&&e.wards&&(a=w.a.getProvinces().find((function(a){return a.name===e.provincial})),I([a.name,a.code]),n=w.a.getDistrictsByProvinceCode(a.code).find((function(a){return a.name===e.district})),M([n.name,n.code]),c=w.a.getWardsByDistrictCode(n.code).find((function(a){return a.name===e.wards})),B([c.name,c.code])),t.setFieldsValue({name:e.name,phone:e.phone,address:e.address,email:e.email,provinces:e.provincial&&[e.provincial,a.code],district:e.district&&[e.district,n.code],ward:e.wards&&[e.wards,c.code]}),C(Object(V.b)(!1))}),[e]);var K={labelCol:{span:4},wrapperCol:{span:20}},Q={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},R=Object(o.useState)("warning"),U=Object(i.a)(R,2),W=(U[0],U[1]),L=function(){var e=Object(r.a)(s.a.mark((function e(a){var t,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,t=a.target.files[0]){e.next=5;break}return e.abrupt("return",Object(k.a)("No files were uploaded."));case 5:if(!(t.size>1048576)){e.next=7;break}return e.abrupt("return",Object(k.a)("Size too large."));case 7:if("image/jpeg"===t.type||"image/png"===t.type){e.next=9;break}return e.abrupt("return",Object(k.a)("File format is incorrect."));case 9:return(n=new FormData).append("file",t),e.next=13,g.a.post("http://localhost:3001/api/upload_avatar",n,{headers:{"content-type":"multipart/form-data",Authorization:F}});case 13:c=e.sent,v(c.data.url),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),Object(k.a)(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(a){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"Profile_page",children:[Object(l.jsxs)("div",{class:"profile_page-header",children:[Object(l.jsx)("h2",{class:"profile_page--title",children:"TH\xd4NG TIN KH\xc1CH H\xc0NG"}),Object(l.jsx)("span",{class:"profile_page-notice",children:"\u0110\u1ea3m b\u1ea3o th\xf4ng tin c\u1ee7a b\u1ea1n l\xe0 ch\xednh x\xe1c, thu\u1eadn ti\u1ec7n h\u01a1n trong qu\xe1 tr\xecnh s\u1eed d\u1ee5ng."})]}),!J&&Object(l.jsxs)("div",{className:"profile_page-content",children:[!G&&e&&Object(l.jsxs)(j.a,Object(n.a)(Object(n.a)({form:t},K),{},{name:"profile",onFinish:function(){var e=t.getFieldsValue(),a=e.name,n=e.email,c=e.phone,s=e.provinces,r=e.ward,i=e.district,l=e.address,o={name:a,email:n,phone:c,provincial:s[0],wards:r[0],district:i[0],address:l,avatar:O};Object(N.a)("user/update","PUT",F,o).then((function(e){t.resetFields(),C(Object(y.f)(o)),Object(k.b)("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng")})).catch((function(e){Object(k.a)("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i")}))},validateMessages:Q,className:"profile_form",children:[Object(l.jsxs)("div",{className:"profile_img",children:[Object(l.jsxs)("div",{className:"avatar",children:[Object(l.jsx)("img",{src:O,alt:"avt"}),Object(l.jsxs)("span",{className:"avatar_change",children:[Object(l.jsx)(m,{className:"profile_img-icon"}),Object(l.jsx)("input",{type:"file",name:"file",id:"file",onChange:L})]})]}),Object(l.jsx)("span",{className:"profile_description",children:"\u1ea2nh \u0111\u1ea1i di\u1ec7n"})]}),Object(l.jsxs)("div",{className:"profile_text",children:[Object(l.jsx)(j.a.Item,{onChange:function(){W(Q?"success":"warning")},label:"H\u1ecd t\xean",name:"name",hasFeedback:!0,rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"}],children:Object(l.jsx)(p.a,{className:"form-control",type:"text",placeholder:"H\u1ecd t\xean",name:"name",defaultValue:e.name,initialValue:e.name,value:e.name,id:"success"})}),Object(l.jsx)(j.a.Item,{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phone",hasFeedback:!0,rules:[{required:!0,message:"Vui l\xf2ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",types:!0}],children:Object(l.jsx)(p.a,{className:"form-control",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phone_number",initialValue:e.phone,defaultValue:e.phone,id:"phone_number"})}),Object(l.jsx)(j.a.Item,{label:"Email",name:"email",hasFeedback:!0,rules:[{required:!1,type:"email"}],children:Object(l.jsx)(p.a,{className:"form-control",type:"text",placeholder:"Email",name:"email",disabled:!0,initialValue:e.email,defaultValue:e.email,id:"success"})}),Object(l.jsx)(j.a.Item,{label:"T\u1ec9nh/ Th\xe0nh ph\u1ed1",name:"provinces",hasFeedback:!0,rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn t\u1ec9nh/th\xe0nh ph\u1ed1"}],placeholder:"Vui l\xf2ng ch\u1ecdn T\u1ec9nh/ Th\xe0nh ph\u1ed1",children:Object(l.jsx)(b.a,{showSearch:!0,allowClear:!0,id:"city",name:"city",onChange:function(e){I(e)},placeholder:"Vui l\xf2ng ch\u1ecdn T\u1ec9nh/ Th\xe0nh ph\u1ed1",children:w.a.getProvinces().map((function(e,a){return Object(l.jsx)(P,{value:[e.name,e.code],children:e.name},a)}))})}),Object(l.jsx)(j.a.Item,{label:"Qu\u1eadn/ Huy\u1ec7n",hasFeedback:!0,name:"district",rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn qu\u1eadn/huy\u1ec7n"}],children:Object(l.jsx)(b.a,{showSearch:!0,allowClear:!0,id:"district",name:"district",onChange:function(e){M(e)},disabled:!T&&!e.district,placeholder:"Vui l\xf2ng ch\u1ecdn Qu\u1eadn/ Huy\u1ec7n",children:T&&w.a.getDistrictsByProvinceCode(T[1]).map((function(e,a){return Object(l.jsx)(P,{value:[e.name,e.code],children:e.name},a)}))})}),Object(l.jsx)(j.a.Item,{label:"Ph\u01b0\u1eddng/ X\xe3",hasFeedback:!0,name:"ward",rules:[{required:!0,message:"Vui l\xf2ng ch\u1ecdn x\xe3/ph\u01b0\u1eddng"}],children:Object(l.jsx)(b.a,{showSearch:!0,allowClear:!0,id:"ward",name:"ward",disabled:!z&&!e.wards,onChange:function(e){B(e)},placeholder:"Vui l\xf2ng ch\u1ecdn X\xe3/ Ph\u01b0\u1eddng",children:z&&w.a.getWardsByDistrictCode(z[1]).map((function(e,a){return Object(l.jsx)(P,{value:[e.name,e.code],children:e.name},a)}))})}),Object(l.jsx)(j.a.Item,{label:"S\u1ed1 nh\xe0/\u0111\u01b0\u1eddng",hasFeedback:!0,name:"address",rules:[{required:!0,message:"Vui l\xf2ng th\xeam \u0111\u1ecba ch\u1ec9"}],children:Object(l.jsx)(p.a,{className:"form-control",type:"text",placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9",name:"address",defaultValue:e.address,initialValue:e.address,id:"success"})}),Object(l.jsx)(j.a.Item,{children:Object(l.jsx)(f.a,{className:"profile_submit",type:"primary",form:"profile",htmlType:"submit",children:"C\u1eacP NH\u1eacT"})})]})]})),G&&Object(l.jsxs)(j.a,Object(n.a)(Object(n.a)({},K),{},{onFinish:function(){var e=d.getFieldValue("oldPassword"),a=d.getFieldValue("newPassword");Object(N.a)("user/reset","POST",F,{newPassword:a,oldPassword:e}).then((function(e){d.resetFields(),Object(k.b)(e.data.msg)})).catch((function(e){return Object(k.a)(e.response.data.msg)}))},form:d,name:"changePassword",className:"profile_form",scrollToFirstError:!0,children:[Object(l.jsx)("div",{className:"profile_img",children:Object(l.jsx)("div",{className:"avatar",children:Object(l.jsx)("img",{src:e.avatar,alt:"avt"})})}),Object(l.jsxs)("div",{className:"profile_text",children:[Object(l.jsx)(j.a.Item,{name:"oldPassword",label:"M\u1eadt kh\u1ea9u c\u0169",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u c\u0169"}],children:Object(l.jsx)(p.a.Password,{})}),Object(l.jsx)(j.a.Item,{name:"newPassword",label:"M\u1eadt kh\u1ea9u m\u1edbi",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"}],hasFeedback:!0,children:Object(l.jsx)(p.a.Password,{})}),Object(l.jsx)(j.a.Item,{name:"confirm",label:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Vui l\xf2ng x\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi"},function(e){var a=e.getFieldValue;return{validator:function(e,t){return t&&a("newPassword")!==t?Promise.reject("M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp, h\xe3y th\u1eed l\u1ea1i !!!"):Promise.resolve()}}}],children:Object(l.jsx)(p.a.Password,{})}),Object(l.jsx)(j.a.Item,{children:Object(l.jsx)(f.a,{className:"profile_submit",type:"primary",form:"changePassword",htmlType:"submit",children:"C\u1eacP NH\u1eacT"})})]})]})),Object(l.jsx)("div",{className:"profile_control ".concat(G?"profile_toggle-active":""),children:Object(l.jsx)("button",{onClick:function(e){X(!G),console.log(G)},className:"profile_toggle",type:"button",children:G?"CH\u1ec8NH S\u1eecA TH\xd4NG TIN":"THAY \u0110\u1ed4I M\u1eacT KH\u1ea8U"})})]})]})}a.default=Object(o.memo)(F)},394:function(e,a,t){}}]);
//# sourceMappingURL=31.89170bca.chunk.js.map